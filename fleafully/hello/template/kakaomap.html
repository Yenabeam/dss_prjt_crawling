<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="map" style="width: 100%; height: 100vh;"></div>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=4f5517aee51dd99d425c74f27bae8e2f&libraries=clusterer"></script>

    <script>
        const url = "https://raw.githubusercontent.com/hayoon/HelloGit/main/data.json";

        var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
          mapOption = { 
            center: new kakao.maps.LatLng(37.55321, 126.972613), // 지도의 중심좌표
            level: 12, // 지도의 확대 레벨
            mapTypeId: kakao.maps.MapTypeId.ROADMAP, // 지도종류
         };

        // 지도를 생성합니다
        var map = new kakao.maps.Map(mapContainer, mapOption);

        fetch(url)
        .then((res) => res.json())
        .then(myJson => {
         console.log(JSON.stringify(myJson.slice(0, 100), null, 1))

         var markers = [];
 
         for (var i=0; i < myJson.slice(0, 100).length; i++) {
 
         // 마커를 생성합니다
           var marker = new kakao.maps.Marker({
             position: new kakao.maps.LatLng(myJson[i]['lons'], myJson[i]['lats']), // 마커가 표시될 위치입니다 
             map: map // 마커가 지도 위에 표시되도록 설정합니다
           });
 
         // 인포윈도우를 생성합니다
           var infowindow = new kakao.maps.InfoWindow({
             content: myJson[i]['title']
           });
 
         
         // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
         infowindow.open(map, marker); 
         markers.push(marker);
         kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
         kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
       }
        });
	  // 클러스터러에 마커들을 추가합니다
	  clusterer.addMarkers(markers);
	  // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
	  function makeOverListener(map, marker, infowindow) {
		return function() {
			infowindow.open(map, marker);
		};
	  }

	  // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
	  function makeOutListener(infowindow) {
		return function() {
			infowindow.close();
		};
	  }

	</script>
</body>
</html>
    